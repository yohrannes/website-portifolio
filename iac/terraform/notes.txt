## Terraform cloud configs 
Don't forget to specify the remote execution mode in org > workspace > settings > general  > execution mode

# Initialize project cli

cd iac
./webport-cli/.sh

# Use terraform
cd /app/terraform/prod
terraform init, plan, state

# Use packer
cd /app/packer/prod
packer build, validate ..

##GCP commands to autenticate service account
export GOOGLE_CLOUD_PROJECT=<website-project-id>;
export GOOGLE_APPLICATION_CREDENTIALS="$HOME/.gcp/credentials.json"
export GOOGLE_REGION=us-west1;
export GOOGLE_ZONE=us-west1-a;
export SERVICE_ACCOUNT_EMAIL="<service-account-email>";

gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
  --member "serviceAccount:$SERVICE_ACCOUNT_EMAIL" \
  --role "roles/compute.instanceAdmin.v1" && \
gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
  --member "serviceAccount:$SERVICE_ACCOUNT_EMAIL" \
  --role "roles/compute.networkAdmin" && \
gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
  --member "serviceAccount:$SERVICE_ACCOUNT_EMAIL" \
  --role "roles/cloudbuild.integrationsOwner" && \
gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
  --member "serviceAccount:$SERVICE_ACCOUNT_EMAIL" \
  --role "roles/vpcaccess.serviceAgent" && \
gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
  --member "serviceAccount:$SERVICE_ACCOUNT_EMAIL" \
  --role "roles/storage.admin" && \
gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
  --member "serviceAccount:$SERVICE_ACCOUNT_EMAIL" \
  --role "roles/compute.securityAdmin"

